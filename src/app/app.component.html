<section id="tasksContainer" class="tasks-container">
  <section id="inputSearchSection">
    <input id="txtSearch" name="txtSearch" type="search" [(ngModel)]="searchText" />
  </section>
  <section id="toDoTaskList" class="todo-task-list">
    <h1>ToDo List</h1>
    <input name="taskName" id="taskName" [(ngModel)]="taskName"
      (keyup.enter)="addToDoTask({TaskName: taskName, Order:0})" />
    <input type="button" value="add" (click)="addToDoTask({TaskName: taskName, Order:0})" />

    <div *ngIf="toDoTaskList.length > 0;  else emptyList" cdkDropList
      (cdkDropListDropped)="drop(toDoTaskList, $event, toDoTaskName)" class="tasks-list">
      <div *ngFor="let task of toDoTaskList | multipleSearchFilter:['TaskName']:searchText; let index = index"
        class="task-box cursor-move" cdkDrag>
        <span class="cursor-pointer" *ngIf="activeLine!=index" (click)="activeLine=index"
          title="click to edit">{{task.Order}} -
          {{task.TaskName}}</span>
        <input *ngIf="activeLine==index" type="text" [(ngModel)]="taskNameEdited"
          (keyup.enter)="renameTaskName({TaskName: taskNameEdited, Order: task.Order})" />
        <span *ngIf="activeLine!=index" title="mark as done" (click)="markAsDone(task)" class="cursor-pointer">
          *mark as done |</span>
        <span class="cursor-pointer" (click)="removeToDoTask(task)"> | REMOVE</span>
        <span *ngIf="activeLine==index" title="ok"
          (click)="renameTaskName({TaskName: taskNameEdited, Order: task.Order})">
          *ok | </span>
        <span *ngIf="activeLine==index" title="cancel edit" (click)="activeLine=-1" class="cursor-pointer">
          *cancel</span>
      </div>
    </div>
  </section>

  <hr />
  <section id="doneTaskList" class="done-task-list" cdkDropListGroup>
    <h2>Done List</h2>
    <div *ngIf="doneTaskList.length > 0; else emptyList" cdkDropList
      (cdkDropListDropped)="drop(doneTaskList, $event, doneTaskName)" class="tasks-list">
      <div *ngFor="let task of  doneTaskList | multipleSearchFilter:['TaskName']:searchText; let index = index"
        class="task-box cursor-move" cdkDrag>
        <div>
          <span class="done-task ">{{task.Order}} - {{task.TaskName}}</span>
        </div>
        <div>
          <span class="cursor-pointer" title="revert" (click)="revertDoneTask(task)" class="cursor-pointer">
            *revert</span>
          <span class="cursor-pointer" (click)="removeDoneTask(task)"> | REMOVE</span>
        </div>
      </div>
    </div>
  </section>
</section>
<!-- Templates -->
<ng-template #emptyList>
  <div>There's no tasks to be shown</div>
</ng-template>
<!-- Modals -->
<section #modalMessage class="modal-message">
  <div class="modal-message-box">message</div>
</section>
